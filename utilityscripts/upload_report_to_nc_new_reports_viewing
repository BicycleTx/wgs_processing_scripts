#!/usr/bin/env bash

source message_functions || exit 1

bucket=$1 && shift
report=$1 && shift

[[ -n "${bucket}" ]] || die "No bucket provided. Exiting"
[[ -n "${report}" ]] || die "No report name provided. Exiting"

nextcloud_dir="STAGING/New-Reports-Viewing"


report_prefix=$( echo ${report} | sed 's/.pdf//g' )
temp_folder_path_report=$( pwd )"/temp_cp_${report_prefix}"
mkdir $temp_folder_path_report
gsutil cp ${bucket}${report}  $temp_folder_path_report/


info "Uploading ${report} from ${bucket} to Nextcloud for viewing."
do_upload_files_to_nextcloud_directory "${nextcloud_dir}" "$temp_folder_path_report/${report}"

rm -r $temp_folder_path_report