#!/usr/bin/env bash

source metadata_functions

path=/data/schuberg/processed_runs
process_runs=$(ls ${path})

for run in ${process_runs}; do
    run_dir=${path}/${run}

    tumor_sample=$(load_tumor_sample_from_metadata ${run_dir})
    if [ -f "${run_dir}/health_checker/${tumor_sample}.HealthCheckSucceeded" ] ; then
            echo "[INFO] HealthChecker has succeeded for ${run}"
    elif [ -f "${run_dir}/health_checker/${tumor_sample}.HealthCheckFailed" ]; then
            echo "[ERROR] HealthChecker has failed for ${run}!!"
    else
            echo "[ERROR] HealthChecker has not been run for ${run}"
    fi
done