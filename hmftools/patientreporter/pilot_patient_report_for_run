#!/bin/bash

prefix=`dirname $(readlink $0 || echo $0)`

knowledgebase_path=/data/common/dbs/knowledgebases/output
drup_genes_csv=/data/common/dbs/drup/180905_drup_genes.csv
hotspot_tsv=/data/common/dbs/somatic_hotspot_v2/Hotspot.tsv

# JOBA: Database details
ensembl_db=$(cat /data/common/dbs/mysql_credentials/ensembl_db_local | head -n 1)
credentials=/data/common/dbs/mysql_credentials/pilot
db_user=$(awk '/^user/ {print $2}' ${credentials})
db_pass=$(awk '/^pass/ {print $2}' ${credentials})

ref_genome=/data/common/refgenomes/Homo_sapiens.GRCh37.GATK.illumina/Homo_sapiens.GRCh37.GATK.illumina.fasta
high_confidence_bed=/data/common/dbs/GIAB_NIST_v3.2.2/NA12878_GIAB_highconf_IllFB-IllGATKHC-CG-Ion-Solid_ALLCHROM_v3.2.2_highconf.bed.gz

fusion_pairs_csv=/data/common/dbs/fusions/knownFusionPairs.csv
promiscuous_five_csv=/data/common/dbs/fusions/knownPromiscuousFive.csv
promiscuous_three_csv=/data/common/dbs/fusions/knownPromiscuousThree.csv

# KODU: Add below command line option to enable germline reporting.
# -do_report_germline \

${prefix}/pilot_do_run_base_patient_reporter \
    -knowledgebase_path ${knowledgebase_path} \
    -drup_genes_csv ${drup_genes_csv} \
    -hotspot_tsv ${hotspot_tsv} \
    -ensembl_db ${ensembl_db} \
    -local_ensembl \
    -db_user ${db_user} \
    -db_pass ${db_pass} \
    -fasta_file_location ${ref_genome} \
    -fusion_pairs_csv ${fusion_pairs_csv} \
    -promiscuous_five_csv ${promiscuous_five_csv} \
    -promiscuous_three_csv ${promiscuous_three_csv} \
    -high_confidence_bed ${high_confidence_bed} \
    -run_dir $@
