#!/bin/bash

prefix=`dirname $(readlink $0 || echo $0)`

patient_reporter_dir=/data/common/tools/patientreporter_pilot

drup_genes_csv=${patient_reporter_dir}/csv/drup_genes.csv
cosmic_csv=/data/common/dbs/cosmic_census/170529_grch37_cosmic_census.csv
fusion_csv=/data/common/dbs/cosmic_census/170915_cosmic_gene_fusions.csv
center_csv=/data/common/dbs/center/center.csv
signature=/data/common/dbs/signature/signature.png
ensembl_db=$(cat ${prefix}/ensembl_db_url | head -n 1)

cpct_ecrf=/data/ecrf/cpct_ecrf.xml
lims_json=/data/lims/lims.json
report_dir=/data/cpct/pilot_reports

exec java -Xmx16G -Xms4G \
    -jar "$patient_reporter_dir"/patient-reporter.jar \
    -lims_json "$lims_json" \
    -cpct_ecrf "$cpct_ecrf" \
    -report_dir "$report_dir" \
    -drup_genes_csv "$drup_genes_csv" \
    -cosmic_csv "$cosmic_csv" \
    -fusion_csv "$fusion_csv" \
    -center_csv "$center_csv" \
    -signature "$signature" \
    -ensembl_db "$ensembl_db" \
    -run_dir "$@"