#!/usr/bin/env bash

source message_functions || exit 1
source locate_files || exit 1

run_dir=$1 && shift

if [[ -z "${run_dir}" ]]; then
    error "Parameters missing. Exiting.";
fi

# Rerun virus interpreter prod required for PROTECT v2.0
info "Running virus interpreter prod on ${run_dir}"
run_virus_interpreter_prod ${run_dir}

# Rerun PROTECT v2.0
info "Running PROTECT research on ${run_dir}"
run_protect_research_on_actin ${run_dir}
load_protect_data_prod_to_pilot_db ${run_dir}
