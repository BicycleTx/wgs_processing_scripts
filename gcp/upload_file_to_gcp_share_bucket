#!/usr/bin/env bash

source message_functions || exit 1

file_to_upload=$1 && shift
bucket='hmf-share-services'

if [[ -z "${file_to_upload}" ]]; then error "No file provided to upload"; fi
if [[ ! -f "${file_to_upload}" ]]; then error "Not a file: (${file_to_upload})"; fi

info "Uploading file to GCP bucket ${bucket}"

gcloud auth activate-service-account --key-file /data/common/dbs/gcp_credentials/hmf-ops
gsutil cp -n ${file_to_upload} gs://${bucket}/
