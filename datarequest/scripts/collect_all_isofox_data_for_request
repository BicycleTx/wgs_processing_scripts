#!/usr/bin/env bash

# NOTE: This script is not used typically in production. Has been added as one-off.

metadata_tsv=$1 && shift
isofox_dir=$1 && shift

cat ${metadata_tsv} | grep -v "^#" | cut -f2 | while read sample_name; do
     source_set_path=/data/data_archive/rna_seq/200602_isofox/${sample_name}/isofox

     dest_set_path=${isofox_dir}/${sample_name}

     mkdir -p ${dest_set_path}

     ## start symlinking
     echo "[DEBUG] Symlinking isofox files for '${sample_name}'"
     ln -s ${source_set_path}/${sample_name}.isf.gene_data.csv  ${dest_set_path}
     ln -s ${source_set_path}/${sample_name}.isf.transcript_data.csv  ${dest_set_path}

done